type Continent @alias(property: "continent") {
  id: ID! @id
  code: String
  type: String
  desc: String
  airportContainssOut(filter: AirportInput, options: Options): [Airport] @relationship(edgeType: "contains", direction: OUT)
  contains: Contains
}

input ContinentInput {
  id: ID @id
  code: String
  type: String
  desc: String
}

type Country @alias(property: "country") {
  _id: ID! @id
  code: String
  type: String
  desc: String
  airportContainssOut(filter: AirportInput, options: Options): [Airport] @relationship(edgeType: "contains", direction: OUT)
  contains: Contains
}

input CountryInput {
  _id: ID @id
  code: String
  type: String
  desc: String
}

type Version @alias(property: "version") {
  _id: ID! @id
  date: String
  code: String
  author: String
  type: String
  desc: String
}

input VersionInput {
  _id: ID @id
  date: String
  code: String
  author: String
  type: String
  desc: String
}

type Airport @alias(property: "airport") {
  _id: ID! @id
  country: String
  longest: Int
  code: String
  city: String
  elev: Int
  icao: String
  lon: Float
  runways: Int
  region: String
  type: String
  lat: Float
  desc2: String @alias(property: "desc")
  outboundRoutesCount: Int @graphQuery(statement: "MATCH (this)-[r:route]->(a) RETURN count(r)")
  continentContainsIn: Continent @relationship(edgeType: "contains", direction: IN)
  countryContainsIn: Country @relationship(edgeType: "contains", direction: IN)
  airportRoutesOut(filter: AirportInput, options: Options): [Airport] @relationship(edgeType: "route", direction: OUT)
  airportRoutesIn(filter: AirportInput, options: Options): [Airport] @relationship(edgeType: "route", direction: IN)
  contains: Contains
  route: Route
}

input AirportInput {
  _id: ID @id
  country: String
  longest: Int
  code: String
  city: String
  elev: Int
  icao: String
  lon: Float
  runways: Int
  region: String
  type: String
  lat: Float
  desc: String
}

type Contains @alias(property: "contains") {
  _id: ID! @id
}

type Route @alias(property: "route") {
  _id: ID! @id
  dist: Int
}

input RouteInput {
  dist: Int
}

input Options {
  limit: Int
}

type Query {
  airportsQueryPrefix_getAirport(code: String): Airport
  airportsQueryPrefix_getAirportConnection(fromCode: String!, toCode: String!): Airport @cypher(statement: "MATCH (:airport{code: '$fromCode'})-[:route]->(this:airport)-[:route]->(:airport{code:'$toCode'})")
  airportsQueryPrefix_getAirportWithGremlin(code:String): Airport @graphQuery(statement: "g.V().has('airport', 'code', '$code').elementMap()")
  airportsQueryPrefix_getContinentsWithGremlin: [Continent] @graphQuery(statement: "g.V().hasLabel('continent').elementMap().fold()")
  airportsQueryPrefix_getCountriesCountGremlin: Int @graphQuery(statement: "g.V().hasLabel('country').count()")

  airportsQueryPrefix_getNodeContinent(filter: ContinentInput): Continent
  airportsQueryPrefix_getNodeContinents(filter: ContinentInput, options: Options): [Continent]
  airportsQueryPrefix_getNodeCountry(filter: CountryInput): Country
  airportsQueryPrefix_getNodeCountrys(filter: CountryInput, options: Options): [Country]
  airportsQueryPrefix_getNodeVersion(filter: VersionInput): Version
  airportsQueryPrefix_getNodeVersions(filter: VersionInput, options: Options): [Version]
  airportsQueryPrefix_getNodeAirport(filter: AirportInput): Airport
  airportsQueryPrefix_getNodeAirports(filter: AirportInput, options: Options): [Airport]
}

type Mutation {
  airportsMutationPrefix_createAirport(input: AirportInput!): Airport @graphQuery(statement: "CREATE (this:airport {$input}) RETURN this")
  airportsMutationPrefix_addRoute(fromAirportCode:String, toAirportCode:String, dist:Int): Route @graphQuery(statement: "MATCH (from:airport{code:'$fromAirportCode'}), (to:airport{code:'$toAirportCode'}) CREATE (from)-[this:route{dist:$dist}]->(to) RETURN this")
  airportsMutationPrefix_deleteAirport(id: ID): Int @graphQuery(statement: "MATCH (this:airport) WHERE ID(this) = '$id' DETACH DELETE this")

  airportsMutationPrefix_createNodeContinent(input: ContinentInput!): Continent
  airportsMutationPrefix_updateNodeContinent(input: ContinentInput!): Continent
  airportsMutationPrefix_deleteNodeContinent(_id: ID!): Boolean
  airportsMutationPrefix_createNodeCountry(input: CountryInput!): Country
  airportsMutationPrefix_updateNodeCountry(input: CountryInput!): Country
  airportsMutationPrefix_deleteNodeCountry(_id: ID!): Boolean
  airportsMutationPrefix_createNodeVersion(input: VersionInput!): Version
  airportsMutationPrefix_updateNodeVersion(input: VersionInput!): Version
  airportsMutationPrefix_deleteNodeVersion(_id: ID!): Boolean
  airportsMutationPrefix_createNodeAirport(input: AirportInput!): Airport
  airportsMutationPrefix_updateNodeAirport(input: AirportInput!): Airport
  airportsMutationPrefix_deleteNodeAirport(_id: ID!): Boolean
  airportsMutationPrefix_connectNodeContinentToNodeAirportEdgeContains(from_id: ID!, to_id: ID!): Contains
  airportsMutationPrefix_deleteEdgeContainsFromContinentToAirport(from_id: ID!, to_id: ID!): Boolean
  airportsMutationPrefix_connectNodeCountryToNodeAirportEdgeContains(from_id: ID!, to_id: ID!): Contains
  airportsMutationPrefix_deleteEdgeContainsFromCountryToAirport(from_id: ID!, to_id: ID!): Boolean
  airportsMutationPrefix_connectNodeAirportToNodeAirportEdgeRoute(from_id: ID!, to_id: ID!, edge: RouteInput!): Route
  airportsMutationPrefix_updateEdgeRouteFromAirportToAirport(from_id: ID!, to_id: ID!, edge: RouteInput!): Route
  airportsMutationPrefix_deleteEdgeRouteFromAirportToAirport(from_id: ID!, to_id: ID!): Boolean
}

schema {
  query: Query
  mutation: Mutation
}